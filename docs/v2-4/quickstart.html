<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="   Quick Start   These docs are for Singularity Version 2.4. For older versions, see our archive                                         This guide is intended for running Singularity on a computer where you have root (administrative) privileges.  But if you are learning about Singularity on a system where you lack root privileges you can still complete the steps that do not require the sudo command.InstallationThere are many ways to install Singularity but this quick start guide will only cover one.git clone https://github.com/singularityware/singularity.gitcd singularity./autogen.sh./configure --prefix=/usr/localmakesudo make installSingularity must be installed as root to function properly.Overview of the Singularity InterfaceSingularity’s command line interface allows you to build and interact with containers transparently. You can run programs inside a container as if they were running on your host system. You can easily redirect IO, use pipes, pass arguments, and access files, sockets, and ports on the host system from within a container.The --help option gives an overview of Singularity options and subcommands as follows:$ singularity --helpUSAGE: singularity [global options...] &lt;command&gt; [command options...] ...GLOBAL OPTIONS:    -d|--debug    Print debugging information    -h|--help     Display usage summary    -s|--silent   Only print errors    -q|--quiet    Suppress all normal output       --version  Show application version    -v|--verbose  Increase verbosity +1    -x|--sh-debug Print shell wrapper debugging informationGENERAL COMMANDS:    help       Show additional help for a command or container                      selftest   Run some self tests for singularity install                      CONTAINER USAGE COMMANDS:    exec       Execute a command within container                                   run        Launch a runscript within container                                  shell      Run a Bourne shell within container                                  test       Launch a testscript within container                             CONTAINER MANAGEMENT COMMANDS:    apps       List available apps within a container                               bootstrap  *Deprecated* use build instead                                       build      Build a new Singularity container                                    check      Perform container lint checks                                        inspect    Display a container's metadata                                       mount      Mount a Singularity container image                                  pull       Pull a Singularity/Docker container to $PWD                      COMMAND GROUPS:    image      Container image command group                                        instance   Persistent instance command group                                CONTAINER USAGE OPTIONS:    see singularity help &lt;command&gt;For any additional help or support visit the Singularitywebsite: http://singularity.lbl.gov/Singularity uses positional syntax.  Global options follow the singularity invocation  and affect the way that Singularity runs any command.  Then commands are passed followed by their options.For example, to pass the --debug option to the main singularity command and  run Singularity with debugging messages on:$ singularity --debug run shub://GodloveD/lolcowAnd to pass the --containall option to the run command and run a Singularity image in an isolated manner:$ singularity run --containall shub://GodloveD/lolcowTo learn more about a specific Singularity command, type one of the following:$ singularity help &lt;command&gt;$ singularity --help &lt;command&gt;$ singularity -h &lt;command&gt;$ singularity &lt;command&gt; --help$ singularity &lt;command&gt; -hUsers can also write help docs specific to a container or for an internal module called an app.  If those help docs exist for a particular container, you can view them like so.$ singularity help container.img            # See the container's help, if provided$ singularity help --app foo container.img  # See the help for foo, if providedDownload pre-built imagesYou can use the pull and build commands to download pre-built images from an external resource like Singularity Hub or Docker Hub.  When called on a native Singularity images like those provided on Singularity Hub, pull simply downloads the image file to your system.$ singularity pull shub://vsoch/hello-world   # pull with default name, vsoch-hello-world-master.img$ singularity pull --name hello.img shub://vsoch/hello-world   # pull with custom nameSingularity images can also be pulled and named by an associated Github commit or content hash.You can also use pull with the docker:// uri to reference Docker images served from a registry.  In this case pull does not just download an image file.  Docker images are stored in layers, so pull must also combine those layers into a usable Singularity file.$ singularity pull docker://godlovedc/lolcow  # with default name$ singularity pull --name funny.img docker://godlovedc/lolcow # with custom namePulling Docker images reduces reproducibility.  If you were to pull a Docker image today and then wait six months and pull again, you are not guaranteed to get the same image.  If any of the source layers has changed the image will be altered. If reproducibility is a priority for you, try building your images from Singularity Hub.You can also use the build command to download pre-built images from an external resource.  When using build you must specify a name for your container like so:$ singularity build hello-world.img shub://vsoch/hello-world$ singularity build lolcow.img docker://godlovedc/lolcowUnlike pull, build will convert your image to the latest Singularity image format after downloading it.build is like a “Swiss Army knife” for container creation.  In addition to downloading images, you can use build to create images from other images or from scratch using a recipe file.  You can also use build to convert an image between the 3 major container formats supported by Singularity.  We discuss those image formats below in the Build images from scratch section.Interact with ImagesOnce you have an image, you can interact with it in several ways. For these examples we will use a hello-world.img image that can be downloaded from Singularity Hub like so.$ singularity pull --name hello-world.img shub://vsoch/hello-worldShellThe shell command allows you to spawn a new shell within your container and interact with it as though it were a small virtual machine.$ singularity shell hello-world.imgSingularity: Invoking an interactive shell within container...# I am the same user inside as outside!Singularity hello-world.img:~/Desktop&gt; whoamivanessaSingularity hello-world.img:~/Desktop&gt; iduid=1000(vanessa) gid=1000(vanessa) groups=1000(vanessa),4(adm),24,27,30(tape),46,113,128,999(input)shell also works with the shub:// and docker:// URIs.  This creates an ephemeral container that disappears when the shell is exited.$ singularity shell shub://vsoch/hello-worldExecuting CommandsThe exec command allows you to execute a custom command within a container by specifying the image file.  For instance, to list the root (/) of our hello-world.img image, we could do the following:$ singularity exec hello-world.img ls /anaconda-post.log  etc	 lib64	     mnt   root  singularity  tmpbin		   home  lost+found  opt   run	 srv	      usrdev		   lib	 media	     proc  sbin  sys	      varexec also works with the shub:// and docker:// URIs.  This creates an ephemeral container that executes a command and disappears.$ singularity exec shub://singularityhub/ubuntu cat /etc/os-releaseRunning a containerSingularity containers contain “runscripts”.  These are user defined scripts that define the actions a container should perform when someone runs it.  The runscript can be triggered with the run command, or simply by calling the container as though it were an executable.$ singularity run hello-world.img$ ./hello-world.imgrun also works with shub:// and docker:// URIs.  This creates an ephemeral container that runs and then disappears.$ singularity run shub://GodloveD/lolcowWorking with FilesFiles on the host are reachable from within the container.$ echo "Hello World" &gt; $HOME/hello-kitty.txt$ singularity exec vsoch-hello-world-master.img cat $HOME/hello-kitty.txtHello WorldThis example works because hello-kitty.txt exists in the user’s home directory.  By default singularity bind mounts /home/$USER, /tmp, and $PWD into your container at runtime.You can specify additional directories to bind mount into your container with the --bind option. In this example, the /data directory on the host system is bind mounted to the /mnt directory inside the container.$ echo "I am your father" &gt;/data/vader.sez$ ~/sing-dev/bin/singularity exec --bind /data:/mnt hello-world.img cat /mnt/vader.sezI am your fatherBuild images from scratchAs of Singularity v2.4 by default build produces immutable images in the squashfs file format. This ensures reproducible and verifiable images.However, during testing and debugging you may want an image format that is writable.  This way you can shell into the image and install software and dependencies until you are satisfied that your container will fulfill your needs.  For these scenarios, Singularity supports two other image formats: a sandbox format (which is really just a chroot directory), and a writable format (the ext3 file system that was used in Singularity versions less than 2.4).For more details about the different build options and best practices, read about the singularity flow.Sandbox DirectoryTo build into a sandbox (container in a directory) use the build --sandbox command and option:$ sudo singularity build --sandbox ubuntu/ docker://ubuntuThis command creates a directory called ubuntu/ with an entire Ubuntu Operating System and some Singularity metadata in your current working directory.You can use commands like shell, exec, and run with this directory just as you would with a Singularity image.  You can also write files to this directory from within a Singularity session (provided you have the permissions to do so).  These files will be ephemeral and will disappear when the container is finished executing. However if you use the --writable option the changes will be saved into your directory so that you can use them the next time you use your container.Writable ImageIf you prefer to have a writable image file, you can build a container with the --writable option.$ sudo singularity build --writable ubuntu.img docker://ubuntuThis produces an image that is writable with an ext3 file system. Unlike the sandbox, it is a single image file.When you want to alter your image, you can use commands like shell, exec, run, with the --writable option. Because of permission issues it may be necessary to execute the container as root to modify it.$ sudo singularity shell --writable ubuntu.imgConverting images from one format to anotherThe build command allows you to build a container from an existing container.  This means that you can use it to convert a container from one format to another.  For instance, if you have already created a sandbox (directory) and want to convert it to the default immutable image format (squashfs) you can do so:$ singularity build new-squashfs sandboxDoing so may break reproducibility if you have altered your sandbox outside of the context of a recipe file, so you are advised to exercise care.You can use build to convert containers to and from writable, sandbox, and default (squashfs) file formats via any of the six possible combinations.Singularity RecipesFor a reproducible, production-quality container, we recommend that you build a container with the default (squashfs) file format using a Singularity recipe file. This also makes it easy to add files, environment variables, and install custom software, and still start from your base of choice (e.g., Singylarity Hub).A recipe file has a header and a body.  The header determines what kind of base container to begin with, and the body is further divided into sections (called scriptlets) that do things like install software, setup the environment, and copy files into the container from the host system.Here is an example of a recipe file:Bootstrap: shubFrom: singularityhub/ubuntu%runscript    exec echo "The runscript is the containers default runtime command!"%files   /home/vanessa/Desktop/hello-kitty.txt        # copied to root of container   /home/vanessa/Desktop/party_dinosaur.gif     /opt/the-party-dino.gif #%environment    VARIABLE=MEATBALLVALUE    export VARIABLE%labels   AUTHOR vsochat@stanford.edu%post    apt-get update &amp;&amp; apt-get -y install python3 git wget    mkdir /data    echo "The post section is where you can install, and configure your container."To build a container from this definition file (assuming it is a file named Singularity), you would call build like so:$ sudo singularity build ubuntu.simg SingularityIn this example, the header tells singularity to use a base Ubuntu image from Singularity Hub.  The %runscript section defines actions for the container to take when it is executed (in this case a simple message).  The %files section copies some files into the container from the host system at build time.  The %environment section defines some environment variables that will be available to the container at runtime.  The %labels section allows for custom metadata to be added to the container. And finally the %post section executes within the container at build time after the base OS has been installed.  The %post section is therefore the place to perform installations of custom apps.This is a very small example of the things that you can do with a recipe file.  In addition to building a container from Singularity Hub, you can start with base images from Docker Hub, use images directly from official repositories such as Ubuntu, Debian, Centos, Arch, and BusyBox, use an existing container on your host system as a base, or even take a snapshot of the host system itself and use that as a base image.If you want to build Singularity images without having singularity installed in a build environment, you can build images using Singularity Hub instead.  If you want a more detailed rundown and examples for different build options, see our singularity flow page                Previous        Next                 Edit me                                                                                                                                                 Site last generated: Oct 12, 2017                             ">


<meta name="name" content="Quick Start">

<meta name="thumbnail" content="http://singularity.lbl.gov/images/logo/logo.svg">




<title>Quick Start | Singularity</title>
<link rel="stylesheet" href="assets/css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="assets/css/modern-business.css">
<link rel="stylesheet" href="assets/css/lavish-bootstrap.css">
<link rel="stylesheet" href="assets/css/customstyles.css">
<link rel="stylesheet" href="assets/css/theme-blue.css">

<link rel="stylesheet" type="text/css" href="assets/css/asciinema-player.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="assets/js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="assets/js/toc.js"></script>
<script src="assets/js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4005feed.xml">

    <script>
        $(document).ready(function() {

            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- asciinema player -->
<script src="assets/js/asciinema-player.js"></script>

<!-- Show or hide players on button clicks-->
<script>
$( document ).ready(function() {
    $(".asciinema-button").click(function(){
        console.log('rawwwr!')
        var asciinemaVideo = "#" + $(this).attr('data-id');
        if ($(asciinemaVideo).hasClass('hidden')){
            $(asciinemaVideo).removeClass('hidden');
            $(this).text('Hide Tutorial')
        } else {
            $(asciinemaVideo).addClass('hidden');
            $(this).text('Show Tutorial')
        }
        
    });
});
</script>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Singularity</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="blog">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="admin-guide">Admin Guide</a></li>
                        
                        
                        
                        <li><a href="user-guide">User Guide</a></li>
                        
                        
                        
                        <li><a href="archive">Archive</a></li>
                        
                        
                        
                        <li><a href="links">Contributed Content</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Links<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/singularityware/singularity" target="_blank">Github Repo</a></li>
                        
                        
                        
                        <li><a href="https://groups.google.com/a/lbl.gov/forum/#!forum/singularity" target="_blank">Google Group</a></li>
                        
                        
                        
                        <li><a href="http://stackoverflow.com/questions/tagged/singularity" target="_blank">Singularity on Stack Overflow</a></li>
                        
                        
                        
                        <li><a href="https://singularity-hub.org/faq" target="_blank">Singularity Hub</a></li>
                        
                        
                        
                        <li><a href="https://singularity-container.slack.com" target="_blank">Slack</a></li>
                        
                        
                        
                        <li><a href="faq#troubleshooting">Troubleshooting</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">People<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/gmkurtzer" target="_blank">Gregory M. Kurtzer</a></li>
                        
                        
                        
                        <li><a href="https://github.com/vsoch" target="_blank">Vanessa Sochat</a></li>
                        
                        
                        
                        <li><a href="https://github.com/bauerm97" target="_blank">Michael Bauer</a></li>
                        
                        
                        
                        <li><a href="https://github.com/bbockelm" target="_blank">Brian Bockelman</a></li>
                        
                        
                        
                        <li><a href="https://github.com/singularityware/singularity/blob/master/AUTHORS.md" target="_blank">Complete Authors List</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <li><a href="/search"><i class="fa fa-search"></i></li>
                <!-- jekyll search hidden in favor of google
                <li>
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="assets/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Quick Start">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">
          






<ul id="mysidebar" class="nav">

    
    <div class="shiny"><a href="\"><figure><img src="/images/logo/logo.svg" class="sidebar-logo"/></figure></a></div>
    

    <li class="sidebarTitle">User Guide</li>
    
    
    
    <li>
        <a href="#">Getting Started</a>
        <ul>
            
            
            
            <li><a href="user-guide">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="docs-installation">Installation</a></li>
            
            
            
            
            
            
            <li class="active"><a href="quickstart">Quick Start</a></li>
            
            
            
            
            
            
            <li><a href="docs-build-container">Build a Container</a></li>
            
            
            
            
            
            
            <li><a href="docs-recipes">Container Recipes</a></li>
            
            
            
            
            
            
            <li><a href="docs-flow">Singularity Flow</a></li>
            
            
            
            
            
            
            <li><a href="docs-mount">Bind Paths and Mounts</a></li>
            
            
            
            
            
            
            <li><a href="docs-overlay">Persistent Overlays</a></li>
            
            
            
            
            
            
            <li><a href="docs-instances">Running Services</a></li>
            
            
            
            
            
            
            <li><a href="docs-user-checks">Container Checks</a></li>
            
            
            
            
            
            
            <li><a href="docs-environment-metadata">Environment and Metadata</a></li>
            
            
            
            
            
            
            <li><a href="docs-scif-apps">Reproducible SCI-F Apps</a></li>
            
            
            
            
            
            
            <li><a href="docs-docker">Singularity and Docker</a></li>
            
            
            
            
            
            
            <li><a href="faq#troubleshooting">Troubleshooting</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Commands</a>
        <ul>
            
            
            
            <li><a href="docs-usage">Command Usage</a></li>
            
            
            
            
            
            
            <li><a href="docs-build">build</a></li>
            
            
            
            
            
            
            <li><a href="docs-exec">exec</a></li>
            
            
            
            
            
            
            <li><a href="docs-inspect">inspect</a></li>
            
            
            
            
            
            
            <li><a href="docs-pull">pull</a></li>
            
            
            
            
            
            
            <li><a href="docs-run">run</a></li>
            
            
            
            
            
            
            <li><a href="docs-shell">shell</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Image Command Group</a>
        <ul>
            
            
            
            <li><a href="docs-export">image.export</a></li>
            
            
            
            
            
            
            <li><a href="docs-expand">image.expand</a></li>
            
            
            
            
            
            
            <li><a href="docs-import">image.import</a></li>
            
            
            
            
            
            
            <li><a href="docs-create">image.create</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Instance Command Group</a>
        <ul>
            
            
            
            <li><a href="docs-instance-start">instance.start</a></li>
            
            
            
            
            
            
            <li><a href="docs-instance-list">instance.list</a></li>
            
            
            
            
            
            
            <li><a href="docs-instance-stop">instance.stop</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Deprecated</a>
        <ul>
            
            
            
            <li><a href="docs-bootstrap">bootstrap</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Quick Start</h1>
   <small style="color: #666; margin-top:50px; font-variant:italic">These docs are for Singularity Version 2.4. For older versions, see our <a class="no-after" 
                                                               href="https://singularityware.github.io/archive">archive</a></small>
</div>



<div class="post-content">

   

    <!-- Previous and next buttons-->
    <div class="row" style="padding-top:30px; margin-bottom:10px"><div class="col-md-12">
        <a href="#"><button style="float:left" class="hidden previous-button btn btn-circle btn-default"><i class="fa-2x fa fa-angle-double-left"></i></button></a>
        <a href="#"><button style="float:right" class="hidden next-button btn btn-circle btn-default"><i class="fa fa-angle-double-right fa-2x"></i></button></a>
    </div></div>

    <script>
    $(document).ready(function(){

        var next = $("li.active").next().last().find('a').attr('href');
        var previous = $("li.active").prev().last().find('a').attr('href');

        // NEXT BUTTON
        if (typeof next == 'undefined'){
            console.log("disabling next button")
            $(".next-button").addClass("hidden")
        } else if (next == "#") {
            next = $("li.active").next().find("li").first().find('a').attr('href');
            $(".next-button").closest('a').attr('href', next)
            $(".next-button").removeClass('hidden')
        } else {
            $(".next-button").closest('a').attr('href', next)
            $(".next-button").removeClass('hidden')
        }

        // PREVIOUS BUTTON
        if (typeof previous == 'undefined'){
            console.log("disabling previous button")
            $(".previous-button").addClass("hidden")
        } else if (previous == "#") {
            previous = $("li.active").prev().find("li").last().find('a').attr('href')
            $(".previous-button").closest('a').attr('href', previous)
            $(".previous-button").removeClass('hidden')
        } else {
            $(".previous-button").closest('a').attr('href', previous)
            $(".previous-button").removeClass('hidden')
        }

    })
    </script>

    

  <p>This guide is intended for running Singularity on a computer where you have root (administrative) privileges.  But if you are learning about Singularity on a system where you lack root privileges you can still complete the steps that do not require the <code class="highlighter-rouge">sudo</code> command.</p>

<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

<h2 id="installation">Installation</h2>
<p>There are many ways to <a href="docs-installation">install Singularity</a> but this quick start guide will only cover one.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>git clone https://github.com/singularityware/singularity.git
<span class="nb">cd </span>singularity
./autogen.sh
./configure --prefix<span class="o">=</span>/usr/local
make
sudo make install
</code></pre>
</div>

<p>Singularity must be installed as root to function properly.</p>

<h2 id="overview-of-the-singularity-interface">Overview of the Singularity Interface</h2>
<p>Singularity’s <a href="docs-usage">command line interface</a> allows you to build and interact with containers transparently. You can run programs inside a container as if they were running on your host system. You can easily redirect IO, use pipes, pass arguments, and access files, sockets, and ports on the host system from within a container.</p>

<p>The <code class="highlighter-rouge">--help</code> option gives an overview of Singularity options and subcommands as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity --help
USAGE: singularity [global options...] &lt;command&gt; [command options...] ...

GLOBAL OPTIONS:
    -d|--debug    Print debugging information
    -h|--help     Display usage summary
    -s|--silent   Only print errors
    -q|--quiet    Suppress all normal output
       --version  Show application version
    -v|--verbose  Increase verbosity +1
    -x|--sh-debug Print shell wrapper debugging information

GENERAL COMMANDS:
    help       Show additional help for a command or container                  
    selftest   Run some self tests for singularity install                      

CONTAINER USAGE COMMANDS:
    exec       Execute a command within container                               
    run        Launch a runscript within container                              
    shell      Run a Bourne shell within container                              
    test       Launch a testscript within container                             

CONTAINER MANAGEMENT COMMANDS:
    apps       List available apps within a container                           
    bootstrap  *Deprecated* use build instead                                   
    build      Build a new Singularity container                                
    check      Perform container lint checks                                    
    inspect    Display a container's metadata                                   
    mount      Mount a Singularity container image                              
    pull       Pull a Singularity/Docker container to $PWD                      

COMMAND GROUPS:
    image      Container image command group                                    
    instance   Persistent instance command group                                


CONTAINER USAGE OPTIONS:
    see singularity help &lt;command&gt;

For any additional help or support visit the Singularity
website: http://singularity.lbl.gov/
</code></pre>
</div>
<p>Singularity uses positional syntax.  Global options follow the <code class="highlighter-rouge">singularity</code> invocation  and affect the way that Singularity runs any command.  Then commands are passed followed by their options.</p>

<p>For example, to pass the <code class="highlighter-rouge">--debug</code> option to the main <code class="highlighter-rouge">singularity</code> command and  run Singularity with debugging messages on:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity --debug run shub://GodloveD/lolcow
</code></pre>
</div>
<p>And to pass the <code class="highlighter-rouge">--containall</code> option to the <code class="highlighter-rouge">run</code> command and run a Singularity image in an isolated manner:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity run --containall shub://GodloveD/lolcow
</code></pre>
</div>
<p>To learn more about a specific Singularity command, type one of the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity help &lt;command&gt;
$ singularity --help &lt;command&gt;
$ singularity -h &lt;command&gt;
$ singularity &lt;command&gt; --help
$ singularity &lt;command&gt; -h
</code></pre>
</div>

<p>Users can also <a href="/docs-recipes#help">write help docs specific to a container</a> or for an internal module called an <a href="/docs-scif-apps">app</a>.  If those help docs exist for a particular container, you can view them like so.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity help container.img            # See the container's help, if provided
$ singularity help --app foo container.img  # See the help for foo, if provided
</code></pre>
</div>

<h2 id="download-pre-built-images">Download pre-built images</h2>
<p>You can use the <a href="docs-pull"><code class="highlighter-rouge">pull</code></a> and <a href="docs-build-container"><code class="highlighter-rouge">build</code></a> commands to download pre-built images from an external resource like <a href="https://singularity-hub.org/">Singularity Hub</a> or <a href="https://hub.docker.com/">Docker Hub</a>.  When called on a native Singularity images like those provided on Singularity Hub, <code class="highlighter-rouge">pull</code> simply downloads the image file to your system.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity pull shub://vsoch/hello-world   # pull with default name, vsoch-hello-world-master.img
$ singularity pull --name hello.img shub://vsoch/hello-world   # pull with custom name
</code></pre>
</div>

<p>Singularity images can also be pulled and named by an associated Github commit or content hash.</p>

<p>You can also use <code class="highlighter-rouge">pull</code> with the <code class="highlighter-rouge">docker://</code> uri to reference Docker images served from a registry.  In this case <code class="highlighter-rouge">pull</code> does not just download an image file.  Docker images are stored in layers, so <code class="highlighter-rouge">pull</code> must also combine those layers into a usable Singularity file.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity pull docker://godlovedc/lolcow  # with default name
$ singularity pull --name funny.img docker://godlovedc/lolcow # with custom name
</code></pre>
</div>

<p>Pulling Docker images reduces reproducibility.  If you were to pull a Docker image today and then wait six months and pull again, you are not guaranteed to get the same image.  If any of the source layers has changed the image will be altered. If reproducibility is a priority for you, try building your images from Singularity Hub.</p>

<p>You can also use the <code class="highlighter-rouge">build</code> command to download pre-built images from an external resource.  When using <code class="highlighter-rouge">build</code> you must specify a name for your container like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity build hello-world.img shub://vsoch/hello-world
$ singularity build lolcow.img docker://godlovedc/lolcow
</code></pre>
</div>

<p>Unlike <code class="highlighter-rouge">pull</code>, <code class="highlighter-rouge">build</code> will convert your image to the latest Singularity image format after downloading it.</p>

<p><code class="highlighter-rouge">build</code> is like a “Swiss Army knife” for container creation.  In addition to downloading images, you can use <code class="highlighter-rouge">build</code> to create images from other images or from scratch using a <a href="/docs-recipes">recipe file</a>.  You can also use <code class="highlighter-rouge">build</code> to convert an image between the 3 major container formats supported by Singularity.  We discuss those image formats below in the <a href="/quickstart#build-images-from-scratch">Build images from scratch</a> section.</p>

<h2 id="interact-with-images">Interact with Images</h2>
<p>Once you have an image, you can interact with it in several ways. For these examples we will use a <code class="highlighter-rouge">hello-world.img</code> image that can be downloaded from Singularity Hub like so.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity pull --name hello-world.img shub://vsoch/hello-world

</code></pre>
</div>

<h3 id="shell">Shell</h3>
<p>The <a href="docs-shell"><code class="highlighter-rouge">shell</code></a> command allows you to spawn a new shell within your container and interact with it as though it were a small virtual machine.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity shell hello-world.img
Singularity: Invoking an interactive shell within container...

# I am the same user inside as outside!
Singularity hello-world.img:~/Desktop&gt; whoami
vanessa

Singularity hello-world.img:~/Desktop&gt; id
uid=1000(vanessa) gid=1000(vanessa) groups=1000(vanessa),4(adm),24,27,30(tape),46,113,128,999(input)
</code></pre>
</div>

<p><code class="highlighter-rouge">shell</code> also works with the <code class="highlighter-rouge">shub://</code> and <code class="highlighter-rouge">docker://</code> URIs.  This creates an ephemeral container that disappears when the shell is exited.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity shell shub://vsoch/hello-world
</code></pre>
</div>

<h3 id="executing-commands">Executing Commands</h3>
<p>The <a href="docs-exec"><code class="highlighter-rouge">exec</code></a> command allows you to execute a custom command within a container by specifying the image file.  For instance, to list the root (<code class="highlighter-rouge">/</code>) of our <code class="highlighter-rouge">hello-world.img</code> image, we could do the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity exec hello-world.img ls /
anaconda-post.log  etc	 lib64	     mnt   root  singularity  tmp
bin		   home  lost+found  opt   run	 srv	      usr
dev		   lib	 media	     proc  sbin  sys	      var
</code></pre>
</div>

<p><code class="highlighter-rouge">exec</code> also works with the <code class="highlighter-rouge">shub://</code> and <code class="highlighter-rouge">docker://</code> URIs.  This creates an ephemeral container that executes a command and disappears.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity exec shub://singularityhub/ubuntu cat /etc/os-release
</code></pre>
</div>

<h3 id="running-a-container">Running a container</h3>
<p>Singularity containers contain “<a href="docs-recipes#runscript">runscripts</a>”.  These are user defined scripts that define the actions a container should perform when someone runs it.  The runscript can be triggered with the <a href="docs-run"><code class="highlighter-rouge">run</code></a> command, or simply by calling the container as though it were an executable.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity run hello-world.img
$ ./hello-world.img
</code></pre>
</div>

<p><code class="highlighter-rouge">run</code> also works with <code class="highlighter-rouge">shub://</code> and <code class="highlighter-rouge">docker://</code> URIs.  This creates an ephemeral container that runs and then disappears.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity run shub://GodloveD/lolcow
</code></pre>
</div>

<h3 id="working-with-files">Working with Files</h3>

<p>Files on the host are reachable from within the container.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ echo "Hello World" &gt; $HOME/hello-kitty.txt
$ singularity exec vsoch-hello-world-master.img cat $HOME/hello-kitty.txt
Hello World
</code></pre>
</div>

<p>This example works because <code class="highlighter-rouge">hello-kitty.txt</code> exists in the user’s home directory.  By default singularity bind mounts <code class="highlighter-rouge">/home/$USER</code>, <code class="highlighter-rouge">/tmp</code>, and <code class="highlighter-rouge">$PWD</code> into your container at runtime.</p>

<p>You can specify additional directories to bind mount into your container with the <a href="docs-mount"><code class="highlighter-rouge">--bind</code></a> option. In this example, the <code class="highlighter-rouge">/data</code> directory on the host system is bind mounted to the <code class="highlighter-rouge">/mnt</code> directory inside the container.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ echo "I am your father" &gt;/data/vader.sez
$ ~/sing-dev/bin/singularity exec --bind /data:/mnt hello-world.img cat /mnt/vader.sez
I am your father
</code></pre>
</div>

<h2 id="build-images-from-scratch">Build images from scratch</h2>
<p>As of Singularity v2.4 by default <code class="highlighter-rouge">build</code> produces immutable images in the squashfs file format. This ensures reproducible and verifiable images.</p>

<p>However, during testing and debugging you may want an image format that is writable.  This way you can <code class="highlighter-rouge">shell</code> into the image and install software and dependencies until you are satisfied that your container will fulfill your needs.  For these scenarios, Singularity supports two other image formats: a <code class="highlighter-rouge">sandbox</code> format (which is really just a chroot directory), and a <code class="highlighter-rouge">writable</code> format (the ext3 file system that was used in Singularity versions less than 2.4).</p>

<p>For more details about the different build options and best practices, read about the <a href="/docs-flow">singularity flow</a>.</p>

<h3 id="sandbox-directory">Sandbox Directory</h3>
<p>To build into a <code class="highlighter-rouge">sandbox</code> (container in a directory) use the <code class="highlighter-rouge">build --sandbox</code> command and option:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo singularity build --sandbox ubuntu/ docker://ubuntu
</code></pre>
</div>

<p>This command creates a directory called <code class="highlighter-rouge">ubuntu/</code> with an entire Ubuntu Operating System and some Singularity metadata in your current working directory.</p>

<p>You can use commands like <code class="highlighter-rouge">shell</code>, <code class="highlighter-rouge">exec</code>, and <code class="highlighter-rouge">run</code> with this directory just as you would with a Singularity image.  You can also write files to this directory from within a Singularity session (provided you have the permissions to do so).  These files will be ephemeral and will disappear when the container is finished executing. However if you use the <code class="highlighter-rouge">--writable</code> option the changes will be saved into your directory so that you can use them the next time you use your container.</p>

<h3 id="writable-image">Writable Image</h3>
<p>If you prefer to have a writable image file, you can <code class="highlighter-rouge">build</code> a container with the <code class="highlighter-rouge">--writable</code> option.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo singularity build --writable ubuntu.img docker://ubuntu
</code></pre>
</div>
<p>This produces an image that is writable with an ext3 file system. Unlike the sandbox, it is a single image file.</p>

<p>When you want to alter your image, you can use commands like <code class="highlighter-rouge">shell</code>, <code class="highlighter-rouge">exec</code>, <code class="highlighter-rouge">run</code>, with the <code class="highlighter-rouge">--writable</code> option. Because of permission issues it may be necessary to execute the container as root to modify it.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo singularity shell --writable ubuntu.img
</code></pre>
</div>

<h3 id="converting-images-from-one-format-to-another">Converting images from one format to another</h3>
<p>The <code class="highlighter-rouge">build</code> command allows you to build a container from an existing container.  This means that you can use it to convert a container from one format to another.  For instance, if you have already created a sandbox (directory) and want to convert it to the default immutable image format (squashfs) you can do so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ singularity build new-squashfs sandbox
</code></pre>
</div>

<p>Doing so may break reproducibility if you have altered your sandbox outside of the context of a recipe file, so you are advised to exercise care.</p>

<p>You can use <code class="highlighter-rouge">build</code> to convert containers to and from <code class="highlighter-rouge">writable</code>, <code class="highlighter-rouge">sandbox</code>, and default (squashfs) file formats via any of the six possible combinations.</p>

<h3 id="singularity-recipes">Singularity Recipes</h3>
<p>For a reproducible, production-quality container, we recommend that you build a container with the default (squashfs) file format using a Singularity recipe file. This also makes it easy to add files, environment variables, and install custom software, and still start from your base of choice (e.g., Singylarity Hub).</p>

<p>A recipe file has a header and a body.  The header determines what kind of base container to begin with, and the body is further divided into sections (called scriptlets) that do things like install software, setup the environment, and copy files into the container from the host system.</p>

<p>Here is an example of a recipe file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Bootstrap: shub
From: singularityhub/ubuntu

%runscript
    exec echo "The runscript is the containers default runtime command!"

%files
   /home/vanessa/Desktop/hello-kitty.txt        # copied to root of container
   /home/vanessa/Desktop/party_dinosaur.gif     /opt/the-party-dino.gif #

%environment
    VARIABLE=MEATBALLVALUE
    export VARIABLE

%labels
   AUTHOR vsochat@stanford.edu

%post
    apt-get update &amp;&amp; apt-get -y install python3 git wget
    mkdir /data
    echo "The post section is where you can install, and configure your container."
</code></pre>
</div>
<p>To build a container from this definition file (assuming it is a file named Singularity), you would call build like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ sudo singularity build ubuntu.simg Singularity
</code></pre>
</div>

<p>In this example, the header tells singularity to use a base Ubuntu image from Singularity Hub.  The <code class="highlighter-rouge">%runscript</code> section defines actions for the container to take when it is executed (in this case a simple message).  The <code class="highlighter-rouge">%files</code> section copies some files into the container from the host system at build time.  The <code class="highlighter-rouge">%environment</code> section defines some environment variables that will be available to the container at runtime.  The <code class="highlighter-rouge">%labels</code> section allows for custom metadata to be added to the container. And finally the <code class="highlighter-rouge">%post</code> section executes within the container at build time after the base OS has been installed.  The <code class="highlighter-rouge">%post</code> section is therefore the place to perform installations of custom apps.</p>

<p>This is a very small example of the things that you can do with a <a href="/docs-recipes">recipe file</a>.  In addition to building a container from Singularity Hub, you can start with base images from Docker Hub, use images directly from official repositories such as Ubuntu, Debian, Centos, Arch, and BusyBox, use an existing container on your host system as a base, or even take a snapshot of the host system itself and use that as a base image.</p>

<p>If you want to build Singularity images without having singularity installed in a build environment, you can build images using <a href="https://github.com/singularityhub/singularityhub.github.io/wiki" target="_blank">Singularity Hub</a> instead.  If you want a more detailed rundown and examples for different build options, see our <a href="/docs-flow">singularity flow</a> page</p>



    <!-- More navigation on the bottom -->
    <div class="row" style="padding-top:30px; margin-bottom:10px"><div class="col-md-12">
        <a href="#"><button style="width:20%; height: 70px; float:left" class="hidden previous-button btn btn-lg btn-default">Previous</button></a>
        <a href="#"><button style="width:20%; height: 70px; float:right" class="hidden next-button btn btn-lg btn-default">Next</button></a>
    </div></div>


    

    

    <a style="margin-top:10px;margin-bottom:10px" target="_blank" href="https://github.com/singularityware/singularityware.github.io/blob/master/pages/_pages/docs/quickstart.md" class="btn btn-default btn-xs githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

    

    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">

               <!-- Social Media links, etc -->
               <div class="col-lg-6 footer">
               
    <a class="no-after social-icon" href="https://twitter.com/SingularityApp">
      <i class="fa fa-4x fa-twitter no-after"></i>
    </a>


    <a class="no-after social-icon" href="https://github.com/singularityware">
      <i class="fa fa-4x fa-github no-after"></i>
    </a>



               </div>

                <div class="col-lg-6 footer">
<p><img src="images/logo/logo.png" alt="Company logo" style="width:40px;padding-bottom:10px"/></p>
 Site last generated: Oct 12, 2017 <br />
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-84672381-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>
